<!DOCTYPE html>
<html>
    <head>
        <title>Bless Email Password Form</title>
        <style>
            .box {
                background-color: purple;
                height: 200px;
                width: 200px;
            }
            input {
                display: block;
                margin: 10px;
            }
        </style>
    </head>
    <body>
        <div id="app" v-cloak>
            <login-form />
           
        <hr />
            <button @click="toggleBox">Toggle Box</button>
            <div v-if="isVisible" class="box"></div>
        </div>
        <script src="https://unpkg.com/vue@next"></script>
        <script>
            let app = Vue.createApp(
                {
                    data: function() {
                        return {
                            greeting: 'Hello World',
                            isVisible: false,
                        }
                    },
                    methods: {
                        toggleBox: function() {
                            this.isVisible = !this.isVisible
                        },
                        greet: function() {
                            console.log(greeting)
                        }
                    }
                }
            )

            app.component('login-form',
                {
                    template: `
                        <form @submit.prevent="handleSubmit">
                            <h1>{{ title }}</h1>
                            <custom-input 
                                v-for="(input, i) in inputs"
                                :key="i"
                                v-model="input.value" 
                                :label="input.label" 
                                :type="input.type"
                            />
                            <button type="submit">Login</button>
                        </form>
                    `,
                    components: ['custom-input'],
                    data() {
                        return {
                            title: 'Login',
                            inputs: [
                                {
                                    type: 'email',
                                    label: 'Email',
                                    modelValue: ''
                                },
                                {
                                    type: 'password',
                                    label: 'Password',
                                    modelValue: ''
                                }
                            ]
                        }
                    },
                    methods: {
                        handleSubmit: function() {
                            console.log(this.inputs[0].value, this.inputs[1].value)
                        }
                    }
                }
            )
            app.component('custom-input',
                {
                    template: `
                        <div>
                            <label>{{ label }}</label>
                            <input :type="type" v-model="inputValue" />
                        </div>
                    `,
                    props: ['label', 'type', 'modelValue'],
                    computed: {
                        inputValue: {
                            get() {
                                return this.modelValue
                            },
                            set(value){
                                this.$emit('update:modelValue', value)
                            }
                        }
                    }
                }
            )

            app.mount('#app')

        </script>
    </body>
</html>